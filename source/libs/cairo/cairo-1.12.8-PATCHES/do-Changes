#! /bin/sh

test -f src/cairo.h || { echo "Can not find src/cairo.h"; exit 1; }

# Makefile.in generated by automake 1.11.6 from Makefile.am.

am=`head -1 Makefile.in \
  | sed 's/^.* automake \(1\.1[0-9]\).* Makefile.am\.$/\1/'`

AM=`automake-$am --version 2>/dev/null | sed 1q`
test -n "$AM" || { echo "Can not find automake-$am"; exit 1; }
echo "Using automake-$am = $AM"

AC=`aclocal-$am --version 2>/dev/null | sed 1q`
test -n "$AC" || { echo "Can not find aclocal-$am"; exit 1; }
echo "Using aclocal-$am = $AC"

for d in */; do
  case $d in
    build/ | src/) ;;
    *)
      for f in `find $d -type f`; do
        case $f in
          */Makefile.am ) echo '#' >$f ;;
          */Makefile.in ) ;;
          */*.in ) echo '#!/bin/sh' >$f ;;
          *) rm -f $f ;;
        esac
        find $d -depth -type d | xargs rmdir 2>/dev/null  # remove empty directories
      done ;;
  esac
done

AUTOMAKE=automake-$am ACLOCAL=aclocal-$am autoreconf
rm -rf `find -name autom4te.cache`
rm -f config.h.in~
