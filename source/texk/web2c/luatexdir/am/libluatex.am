## texk/web2c/luatexdir/am/libluatex.am: Makefile fragment for libluatex.
##
## Copyright (C) 2009, 2010 Peter Breitenlohner <tex-live@tug.org>
## You may freely use, modify and/or distribute this file.

## libluatex
##
EXTRA_LIBRARIES += libluatex.a

libluatex_a_DEPENDENCIES = libff.a

libluatex_a_CPPFLAGS = $(ZLIB_INCLUDES) $(LIBPNG_INCLUDES) $(XPDF_INCLUDES)
libluatex_a_CPPFLAGS += $(OBSDCOMPAT_INCLUDES) -I$(srcdir)/libmd5
libluatex_a_CPPFLAGS += -Iluatexdir -I$(srcdir)/luatexdir -I$(srcdir)/luatexdir/lua51
libluatex_a_CPPFLAGS += -DpdfTeX
libluatex_a_CFLAGS = $(WARNING_CFLAGS)
libluatex_a_CXXFLAGS = # $(WARNING_CXXFLAGS)

luatex_dvi_ctangle = CWEBINPUTS=$(srcdir)/luatexdir/dvi $(ctangle)
dvigen.c: ctangle$(EXEEXT) luatexdir/dvi/dvigen.w
	$(luatex_dvi_ctangle) dvigen.w

libluatex_web = luatexdir/dvi/dvigen.w

nodist_libluatex_a_SOURCES = dvigen.c

luatex_ocp_ctangle = CWEBINPUTS=$(srcdir)/luatexdir/ocp $(ctangle)

ocp.c: ctangle$(EXEEXT) luatexdir/ocp/ocp.w
	$(luatex_ocp_ctangle) ocp.w

runocp.c: ctangle$(EXEEXT) luatexdir/ocp/runocp.w
	$(luatex_ocp_ctangle) runocp.w

readocp.c: ctangle$(EXEEXT) luatexdir/ocp/readocp.w
	$(luatex_ocp_ctangle) readocp.w

ocplist.c: ctangle$(EXEEXT) luatexdir/ocp/ocplist.w
	$(luatex_ocp_ctangle) ocplist.w

libluatex_web += luatexdir/ocp/ocp.w luatexdir/ocp/ocplist.w luatexdir/ocp/readocp.w luatexdir/ocp/runocp.w

nodist_libluatex_a_SOURCES += ocp.c ocplist.c readocp.c runocp.c



luatex_tex_ctangle = CWEBINPUTS=$(srcdir)/luatexdir/tex $(ctangle)

align.c: ctangle$(EXEEXT) luatexdir/tex/align.w
	$(luatex_tex_ctangle) align.w

libluatex_web += luatexdir/tex/align.w

nodist_libluatex_a_SOURCES += align.c

dumpdata.c: ctangle$(EXEEXT) luatexdir/tex/dumpdata.w
	$(luatex_tex_ctangle) dumpdata.w

nodist_libluatex_a_SOURCES += dumpdata.c

libluatex_web += luatexdir/tex/dumpdata.w


expand.c: ctangle$(EXEEXT) luatexdir/tex/expand.w
	$(luatex_tex_ctangle) expand.w

nodist_libluatex_a_SOURCES += expand.c

libluatex_web += luatexdir/tex/expand.w


inputstack.c: ctangle$(EXEEXT) luatexdir/tex/inputstack.w
	$(luatex_tex_ctangle) inputstack.w

nodist_libluatex_a_SOURCES += inputstack.c

libluatex_web += luatexdir/tex/inputstack.w


maincontrol.c: ctangle$(EXEEXT) luatexdir/tex/maincontrol.w
	$(luatex_tex_ctangle) maincontrol.w

nodist_libluatex_a_SOURCES += maincontrol.c

libluatex_web += luatexdir/tex/maincontrol.w


mlist.c: ctangle$(EXEEXT) luatexdir/tex/mlist.w
	$(luatex_tex_ctangle) mlist.w

nodist_libluatex_a_SOURCES += mlist.c

libluatex_web += luatexdir/tex/mlist.w


postlinebreak.c: ctangle$(EXEEXT) luatexdir/tex/postlinebreak.w
	$(luatex_tex_ctangle) postlinebreak.w

nodist_libluatex_a_SOURCES += postlinebreak.c

libluatex_web += luatexdir/tex/postlinebreak.w


scanning.c: ctangle$(EXEEXT) luatexdir/tex/scanning.w
	$(luatex_tex_ctangle) scanning.w

nodist_libluatex_a_SOURCES += scanning.c

libluatex_web += luatexdir/tex/scanning.w


texdeffont.c: ctangle$(EXEEXT) luatexdir/tex/texdeffont.w
	$(luatex_tex_ctangle) texdeffont.w

nodist_libluatex_a_SOURCES += texdeffont.c

libluatex_web += luatexdir/tex/texdeffont.w


texnodes.c: ctangle$(EXEEXT) luatexdir/tex/texnodes.w
	$(luatex_tex_ctangle) texnodes.w

nodist_libluatex_a_SOURCES += texnodes.c

libluatex_web += luatexdir/tex/texnodes.w


arithmetic.c: ctangle$(EXEEXT) luatexdir/tex/arithmetic.w
	$(luatex_tex_ctangle) arithmetic.w

nodist_libluatex_a_SOURCES += arithmetic.c

libluatex_web += luatexdir/tex/arithmetic.w


conditional.c: ctangle$(EXEEXT) luatexdir/tex/conditional.w
	$(luatex_tex_ctangle) conditional.w

nodist_libluatex_a_SOURCES += conditional.c

libluatex_web += luatexdir/tex/conditional.w


equivalents.c: ctangle$(EXEEXT) luatexdir/tex/equivalents.w
	$(luatex_tex_ctangle) equivalents.w

nodist_libluatex_a_SOURCES += equivalents.c

libluatex_web += luatexdir/tex/equivalents.w


extensions.c: ctangle$(EXEEXT) luatexdir/tex/extensions.w
	$(luatex_tex_ctangle) extensions.w

nodist_libluatex_a_SOURCES += extensions.c

libluatex_web += luatexdir/tex/extensions.w

commands.c: ctangle$(EXEEXT) luatexdir/tex/commands.w
	$(luatex_tex_ctangle) commands.w

nodist_libluatex_a_SOURCES += commands.c

libluatex_web += luatexdir/tex/commands.w


linebreak.c: ctangle$(EXEEXT) luatexdir/tex/linebreak.w
	$(luatex_tex_ctangle) linebreak.w

nodist_libluatex_a_SOURCES += linebreak.c

libluatex_web += luatexdir/tex/linebreak.w


mathcodes.c: ctangle$(EXEEXT) luatexdir/tex/mathcodes.w
	$(luatex_tex_ctangle) mathcodes.w

nodist_libluatex_a_SOURCES += mathcodes.c

libluatex_web += luatexdir/tex/mathcodes.w


nesting.c: ctangle$(EXEEXT) luatexdir/tex/nesting.w
	$(luatex_tex_ctangle) nesting.w

nodist_libluatex_a_SOURCES += nesting.c

libluatex_web += luatexdir/tex/nesting.w


primitive.c: ctangle$(EXEEXT) luatexdir/tex/primitive.w
	$(luatex_tex_ctangle) primitive.w

nodist_libluatex_a_SOURCES += primitive.c

libluatex_web += luatexdir/tex/primitive.w


texfileio.c: ctangle$(EXEEXT) luatexdir/tex/texfileio.w
	$(luatex_tex_ctangle) texfileio.w

nodist_libluatex_a_SOURCES += texfileio.c

libluatex_web += luatexdir/tex/texfileio.w


textcodes.c: ctangle$(EXEEXT) luatexdir/tex/textcodes.w
	$(luatex_tex_ctangle) textcodes.w

nodist_libluatex_a_SOURCES += textcodes.c

libluatex_web += luatexdir/tex/textcodes.w


buildpage.c: ctangle$(EXEEXT) luatexdir/tex/buildpage.w
	$(luatex_tex_ctangle) buildpage.w

nodist_libluatex_a_SOURCES += buildpage.c

libluatex_web += luatexdir/tex/buildpage.w


directions.c: ctangle$(EXEEXT) luatexdir/tex/directions.w
	$(luatex_tex_ctangle) directions.w

nodist_libluatex_a_SOURCES += directions.c

libluatex_web += luatexdir/tex/directions.w


errors.c: ctangle$(EXEEXT) luatexdir/tex/errors.w
	$(luatex_tex_ctangle) errors.w

nodist_libluatex_a_SOURCES += errors.c

libluatex_web += luatexdir/tex/errors.w


filename.c: ctangle$(EXEEXT) luatexdir/tex/filename.w
	$(luatex_tex_ctangle) filename.w

nodist_libluatex_a_SOURCES += filename.c

libluatex_web += luatexdir/tex/filename.w


mainbody.c: ctangle$(EXEEXT) luatexdir/tex/mainbody.w
	$(luatex_tex_ctangle) mainbody.w

nodist_libluatex_a_SOURCES += mainbody.c

libluatex_web += luatexdir/tex/mainbody.w


memoryword.c: ctangle$(EXEEXT) luatexdir/tex/memoryword.w
	$(luatex_tex_ctangle) memoryword.w

nodist_libluatex_a_SOURCES += memoryword.c

libluatex_web += luatexdir/tex/memoryword.w


packaging.c: ctangle$(EXEEXT) luatexdir/tex/packaging.w
	$(luatex_tex_ctangle) packaging.w

nodist_libluatex_a_SOURCES += packaging.c

libluatex_web += luatexdir/tex/packaging.w


printing.c: ctangle$(EXEEXT) luatexdir/tex/printing.w
	$(luatex_tex_ctangle) printing.w

nodist_libluatex_a_SOURCES += printing.c

libluatex_web += luatexdir/tex/printing.w


stringpool.c: ctangle$(EXEEXT) luatexdir/tex/stringpool.w
	$(luatex_tex_ctangle) stringpool.w

nodist_libluatex_a_SOURCES += stringpool.c

libluatex_web += luatexdir/tex/stringpool.w


texmath.c: ctangle$(EXEEXT) luatexdir/tex/texmath.w
	$(luatex_tex_ctangle) texmath.w

nodist_libluatex_a_SOURCES += texmath.c

libluatex_web += luatexdir/tex/texmath.w


textoken.c: ctangle$(EXEEXT) luatexdir/tex/textoken.w
	$(luatex_tex_ctangle) textoken.w

nodist_libluatex_a_SOURCES += textoken.c

libluatex_web += luatexdir/tex/textoken.w




libluatex_a_SOURCES = \
	luatexdir/dvi/dvigen.h \
	luatexdir/font/dofont.c \
	luatexdir/font/luatexfont.h \
	luatexdir/font/luafont.c \
	luatexdir/font/mapfile.c \
	luatexdir/font/mapfile.h \
	luatexdir/font/pkin.c \
	luatexdir/font/sfnt.c \
	luatexdir/font/sfnt.h \
	luatexdir/font/subfont.c \
	luatexdir/font/texfont.c \
	luatexdir/font/texfont.h \
	luatexdir/font/tfmofm.c \
	luatexdir/font/tounicode.c \
	luatexdir/font/tt_glyf.c \
	luatexdir/font/tt_glyf.h \
	luatexdir/font/tt_table.c \
	luatexdir/font/tt_table.h \
	luatexdir/font/vfovf.c \
	luatexdir/font/vfpacket.c \
	luatexdir/font/writecff.c \
	luatexdir/font/writecff.h \
	luatexdir/font/writeenc.c \
	luatexdir/font/writefont.c \
	luatexdir/font/writet1.c \
	luatexdir/font/writet3.c \
	luatexdir/font/writettf.c \
	luatexdir/font/writettf.h \
	luatexdir/font/writetype0.c \
	luatexdir/font/writetype2.c \
	luatexdir/image/epdf.c \
	luatexdir/image/epdf.h \
	luatexdir/image/image.h \
	luatexdir/image/pdftoepdf.cc \
	luatexdir/image/pdftoepdf.h \
	luatexdir/image/writeimg.c \
	luatexdir/image/writeimg.h \
	luatexdir/image/writejbig2.c \
	luatexdir/image/writejbig2.h \
	luatexdir/image/writejpg.c \
	luatexdir/image/writejpg.h \
	luatexdir/image/writepng.c \
	luatexdir/image/writepng.h \
	luatexdir/lang/hnjalloc.c \
	luatexdir/lang/hnjalloc.h \
	luatexdir/lang/hyphen.c \
	luatexdir/lang/hyphen.h \
	luatexdir/lang/texlang.c \
	luatexdir/lang/texlang.h \
	luatexdir/lua/lcallbacklib.c \
	luatexdir/lua/lfontlib.c \
	luatexdir/lua/limglib.c \
	luatexdir/lua/lepdflib.cc \
	luatexdir/lua/lkpselib.c \
	luatexdir/lua/llanglib.c \
	luatexdir/lua/llualib.c \
	luatexdir/lua/lnodelib.c \
	luatexdir/lua/loslibext.c \
	luatexdir/lua/liolib.c \
	luatexdir/lua/lpdflib.c \
	luatexdir/lua/lstatslib.c \
	luatexdir/lua/ltexiolib.c \
	luatexdir/lua/ltexlib.c \
	luatexdir/lua/ltokenlib.c \
	luatexdir/lua/luagen.c \
	luatexdir/lua/luagen.h \
	luatexdir/lua/luainit.c \
	luatexdir/lua/luanode.c \
	luatexdir/lua/luastuff.c \
	luatexdir/lua/luatex.c \
	luatexdir/lua/luatex-api.h \
	luatexdir/lua/luatoken.c \
	luatexdir/lua/texluac.c \
	luatexdir/luatex.h \
	luatexdir/ocp/ocp.h \
	luatexdir/ocp/ocplist.h \
	luatexdir/ocp/readocp.h \
	luatexdir/ocp/runocp.h \
	luatexdir/pdf/pagetree.c \
	luatexdir/pdf/pagetree.h \
	luatexdir/pdf/pdfaction.c \
	luatexdir/pdf/pdfaction.h \
	luatexdir/pdf/pdfannot.c \
	luatexdir/pdf/pdfannot.h \
	luatexdir/pdf/pdfcolorstack.c \
	luatexdir/pdf/pdfcolorstack.h \
	luatexdir/pdf/pdfdest.c \
	luatexdir/pdf/pdfdest.h \
	luatexdir/pdf/pdffont.c \
	luatexdir/pdf/pdffont.h \
	luatexdir/pdf/pdfgen.c \
	luatexdir/pdf/pdfgen.h \
	luatexdir/pdf/pdfglyph.c \
	luatexdir/pdf/pdfglyph.h \
	luatexdir/pdf/pdfimage.c \
	luatexdir/pdf/pdfimage.h \
	luatexdir/pdf/pdflink.c \
	luatexdir/pdf/pdflink.h \
	luatexdir/pdf/pdflistout.c \
	luatexdir/pdf/pdflistout.h \
	luatexdir/pdf/pdfliteral.c \
	luatexdir/pdf/pdfliteral.h \
	luatexdir/pdf/pdfobj.c \
	luatexdir/pdf/pdfobj.h \
	luatexdir/pdf/pdfoutline.c \
	luatexdir/pdf/pdfoutline.h \
	luatexdir/pdf/pdfpage.c \
	luatexdir/pdf/pdfpage.h \
	luatexdir/pdf/pdfrule.c \
	luatexdir/pdf/pdfrule.h \
	luatexdir/pdf/pdfsaverestore.c \
	luatexdir/pdf/pdfsaverestore.h \
	luatexdir/pdf/pdfsetmatrix.c \
	luatexdir/pdf/pdfsetmatrix.h \
	luatexdir/pdf/pdfshipout.c \
	luatexdir/pdf/pdfshipout.h \
	luatexdir/pdf/pdftables.c \
	luatexdir/pdf/pdftables.h \
	luatexdir/pdf/pdfthread.c \
	luatexdir/pdf/pdfthread.h \
	luatexdir/pdf/pdftypes.h \
	luatexdir/pdf/pdfxform.c \
	luatexdir/pdf/pdfxform.h \
	luatexdir/tex/align.h \
	luatexdir/tex/arithmetic.h \
	luatexdir/tex/buildpage.h \
	luatexdir/tex/commands.h \
	luatexdir/tex/conditional.h \
	luatexdir/tex/directions.h \
	luatexdir/tex/dumpdata.h \
	luatexdir/tex/equivalents.h \
	luatexdir/tex/errors.h \
	luatexdir/tex/expand.h \
	luatexdir/tex/extensions.h \
	luatexdir/tex/filename.h \
	luatexdir/tex/inputstack.h \
	luatexdir/tex/linebreak.h \
	luatexdir/tex/mainbody.h \
	luatexdir/tex/maincontrol.h \
	luatexdir/tex/mathcodes.h \
	luatexdir/tex/memoryword.h \
	luatexdir/tex/mlist.h \
	luatexdir/tex/nesting.h \
	luatexdir/tex/packaging.h \
	luatexdir/tex/postlinebreak.h \
	luatexdir/tex/primitive.h \
	luatexdir/tex/printing.h \
	luatexdir/tex/scanning.h \
	luatexdir/tex/stringpool.h \
	luatexdir/tex/texdeffont.h \
	luatexdir/tex/texfileio.h \
	luatexdir/tex/texmath.h \
	luatexdir/tex/texnodes.h \
	luatexdir/tex/textoken.h \
	luatexdir/tex/textcodes.h \
	luatexdir/utils/avl.c \
	luatexdir/utils/avl.h \
	luatexdir/utils/avlstuff.c \
	luatexdir/utils/avlstuff.h \
	luatexdir/utils/managed-sa.c \
	luatexdir/utils/managed-sa.h \
	luatexdir/utils/synctex.h \
	luatexdir/utils/synctex.c \
	luatexdir/utils/utils.c \
	luatexdir/utils/utils.h \
	$(nodist_libluatex_a_SOURCES) \
	mplibdir/lmplib.c

## included by luatexdir/font/writettf.c
EXTRA_libluatex_a_SOURCES = luatexdir/font/macnames.c

$(libluatex_a_OBJECTS): libff.a

EXTRA_DIST += $(libluatex_web) 

DISTCLEANFILES += $(nodist_libluatex_a_SOURCES)

EXTRA_DIST += \
	luatexdir/ChangeLog \
	luatexdir/NEWS \
	luatexdir/README \
	luatexdir/font/subfont.txt

